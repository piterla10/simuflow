<app-navbar #navbar (abrir)="abrirModales('navbar')"></app-navbar>
<section class="menu">
    <article>
        <button type="button" 
            (click)="setModo('edicion')" 
            [class.activo]="modoActivo === 'edicion'">
            Modo edici贸n
        </button>
        <button type="button"
            (click)="setModo('simulacion')"
            [class.activo]="modoActivo === 'simulacion'">
            Modo simulaci贸n
        </button>
    </article>
    <article>
        <app-herramientas-edicion (herramientaSimulador)="cambioHerramienta($event)" *ngIf="modoActivo === 'edicion'"></app-herramientas-edicion>
        <app-herramientas-simulacion [vistaCambiada]="vistaSimulacion" #herrSim (herramientaSimulador)="cambioHerramienta($event)" *ngIf="modoActivo === 'simulacion'"></app-herramientas-simulacion>
    </article>
    <div *ngIf="sistemas.length > 1 && paso == 0" class="boton-flotante">
       <!-- Bot贸n que activa el modal del orden de los app-orden-sistemas -->
        <button type="button" class="boton" (click)="abrirModales('ordenSistemas')"><img class="botonSistemas" src="assets/controlador.png" alt="Orden sistemas"></button>
    </div>
</section>
<!-- secci贸n de modales que pueden aparecer dependiendo de donde cliquemos -->

<app-crear-elemento #elemento (elemento)="cambioElemento($event)"></app-crear-elemento>
<app-elemento-detalles #elementoDetalles [celda]="celdaSeleccionada!" (actualizar)="seleccionar($event)" (valorSistema)="actualizarSistema($event)"></app-elemento-detalles>
<app-basura #basura (borrar)="confirmarBorrado()"></app-basura>

<app-velocidad #velocidad [ItiempoCiclo]="tiempoCiclo" [ItiempoTranscurrido]="tiempoTranscurrido" (EEtiempoCiclo)="procesarTiempoCiclo($event)" (EEtiempoTranscurrido)="procesarTiempoTranscurrido($event)"></app-velocidad>
<app-orden-sistemas #ordenSistemas [sistemas]="sistemas"></app-orden-sistemas>
<!-- grid de trabajo -->
<section class="grid-container">
    <article class="grid" [style.--cols]="columnas" [style.--rows]="filas" *ngIf="vistaSimulacion == 'grid'">
        <div class="cell"
        *ngFor="let cell of datosGrid"
        [class.selected]="celdaSeleccionada === cell"
        (click)="controladorCanvas(cell)">
            <div *ngIf="cell.content" class="cell-content">
                <img [src]="imagenDeposito(cell.content)" [alt]="cell.content.tipo">
                <p class="infoElemento">{{infoElemento(cell.content)}}</p>
                <p class="infoSistema" *ngIf="cell.content.sistema.length > 0">
                    <ng-container *ngFor="let id of infoSistema(cell)">
                        <div>{{ id }}</div>
                    </ng-container>
                </p>
            </div>
        </div>
    </article>
    <article echarts [options]="options" [merge]="merge" *ngIf="vistaSimulacion == 'grafico'" class="grafico"></article>
</section>

